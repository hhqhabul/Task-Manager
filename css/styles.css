/* =========================================================
   Palette (locked to provided images)
   ========================================================= */
:root{
  --black:#000000; --white:#ffffff;
  --periwinkle:#acc2fd; --gray:#d4d6d6;
  --lemon:#f4ff85; --purple:#aa80ec;

  /* theme tokens */
  --bg: var(--periwinkle);      /* page canvas like mock */
  --surface: var(--white);      /* cards, fields */
  --surface-2: var(--white);
  --text: var(--black);
  --muted: var(--gray);
  --border: var(--gray);
  --brand: var(--purple);
  --accent: var(--periwinkle);
  --highlight: var(--lemon);

  --radius: 14px;
  --radius-sm: 10px;
  --shadow-1: 0 8px 24px rgba(0,0,0,.25);
  --shadow-2: 0 18px 50px rgba(0,0,0,.35);
  --focus-ring: 0 0 0 3px rgba(170,128,236,.45); /* purple alpha */
  --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;

  --h1: clamp(1.6rem, 3vw, 2.2rem);
  --h2: clamp(1.2rem, 2.2vw, 1.6rem);
  --h3: clamp(1.05rem, 1.8vw, 1.25rem);
}

/* Auto dark: poster-style black like the banner */
@media (prefers-color-scheme: dark){
  :root{
    --bg: var(--black);
    --surface: var(--black);
    --surface-2: var(--black);
    --text: var(--white);
    --muted: var(--gray);
    --border: var(--gray);
  }
}

/* =========================================================
   Base / reset
   ========================================================= */
*,
*::before,
*::after{ box-sizing:border-box; }
html{ scroll-behavior:smooth; }
body{
  margin:0; min-height:100svh;
  font:16px/1.55 var(--font);
  color:var(--text); background:var(--bg);
}
a{ color:var(--brand); text-decoration:none; }
a:hover{ text-decoration:underline; }
:focus-visible{ outline:none; box-shadow:var(--focus-ring); border-radius:10px; }
.container{ width:min(100% - 2rem, 1100px); margin-inline:auto; }
.visually-hidden{ position:absolute !important; width:1px;height:1px;margin:-1px;overflow:hidden;clip:rect(0 0 0 0);white-space:nowrap;border:0; }

/* =========================================================
   Header / Nav (black poster bar like first image)
   ========================================================= */
header{
  position:sticky; top:0; z-index:10;
  background: var(--black);
  border-bottom:1px solid var(--gray);
  color: var(--white);
}
header .container{ padding:.9rem 0; }
header nav{
  display:flex; align-items:center; justify-content:space-between; gap:1rem;
}
.brand{
  color:var(--white);
  font-weight:900; letter-spacing:.3px; font-size:1.35rem;
  text-decoration:none; padding:.2rem .4rem; border-radius:10px;
}
header nav ul{ display:flex; gap:.6rem; list-style:none; margin:0; padding:0; }
header nav a{
  display:inline-block; padding:.45rem .75rem; border-radius:999px;
  color:var(--white); border:1px solid transparent;
}
header nav a[aria-current="page"],
header nav a:hover{
  background: rgba(255,255,255,.08); border-color: rgba(255,255,255,.15);
}

/* At-a-glance row */
header section[aria-label="At-a-glance"]{
  margin-top:.5rem; color:var(--muted);
  display:flex; align-items:center; gap:.9rem; flex-wrap:wrap;
}
#progress{
  width:min(420px,100%); height:.6rem; appearance:none; border:none; border-radius:999px; background: rgba(255,255,255,.12);
}
#progress::-webkit-progress-bar{ background: rgba(255,255,255,.12); border-radius:999px; }
#progress::-webkit-progress-value{ background: var(--brand); border-radius:999px; }
#progress::-moz-progress-bar{ background: var(--brand); border-radius:999px; }

/* =========================================================
   Main layout
   ========================================================= */
main.container{ padding-block: 2rem; }
section{ padding-block: 1.5rem; }
section + section{ border-top:1px solid var(--border); }
h1{ font-size:var(--h1); margin:0 0 .6rem; }
h2{ font-size:var(--h2); margin:.2rem 0 .8rem; }
h3{ font-size:var(--h3); margin:.2rem 0 .25rem; }

/* =========================================================
   Forms (clean, white cards on periwinkle)
   ========================================================= */
form{ display:grid; gap: 1rem; }
fieldset{
  margin:0; padding: 1rem;
  border:1px solid var(--border); border-radius: var(--radius);
  background: var(--surface);
  box-shadow: var(--shadow-1); color:var(--text);
}
legend{ padding:0 .4rem; font-weight:800; letter-spacing:.2px; }
label{ font-weight:650; color: var(--text); }

input[type="text"],
input[type="search"],
input[type="date"],
select,
textarea{
  margin-top:.35rem; width:100%;
  padding:.8rem .9rem; border-radius: var(--radius-sm);
  border:1px solid var(--border); background: var(--surface);
  color:var(--text); transition: border-color .15s ease, box-shadow .15s ease;
}
textarea{ min-height:120px; resize:vertical; }
#title-hint, #submit-hint{ color: var(--text); opacity:.7; margin:.35rem 0 0; font-size:.92rem; }

/* Two-column form when wide */
@media (min-width:780px){
  #task-form fieldset:first-of-type{
    display:grid; grid-template-columns: 2fr 1fr 1fr; gap: 1rem;
  }
  #task-form fieldset:first-of-type > div:nth-child(2){ grid-column: 1 / -1; }
}

/* Buttons (purple & lemon like the mobile mock) */
button{
  appearance:none; border:none; cursor:pointer;
  padding:.8rem 1.1rem; border-radius:12px; font-weight:800; letter-spacing:.2px;
  background:var(--brand); color:var(--black); box-shadow:var(--shadow-1);
  transition:transform .06s ease, box-shadow .2s ease;
}
button:hover{ transform:translateY(-1px); box-shadow:var(--shadow-2); }
button:active{ transform:translateY(0); box-shadow:var(--shadow-1); }
button[disabled]{ opacity:.6; cursor:not-allowed; }

/* =========================================================
   Filters (accordion)
   ========================================================= */
#filters details{
  border:1px dashed var(--border); border-radius: var(--radius);
  padding: .75rem 1rem; background: var(--surface);
  box-shadow: var(--shadow-1);
}
#filters summary{ list-style:none; cursor:pointer; font-weight:800; letter-spacing:.2px; }
#filters summary::marker{ content:""; }

/* Inline actions row */
.inline-actions{ display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; }

/* =========================================================
   Task list (cards)
   ========================================================= */
#empty-message{
  color:var(--text); opacity:.75;
  background: rgba(255,255,255,.55);
  border:1px dashed var(--border); border-radius: var(--radius);
  padding: .75rem 1rem;
}
@media (prefers-color-scheme: dark){
  #empty-message{ background: rgba(255,255,255,.06); }
}

#task-list{
  margin: 1.25rem 0 0; padding:0; list-style:none;
  display:grid; gap: .9rem; grid-template-columns: 1fr;
}
#task-list > li > article{
  display:grid; gap:.55rem; padding: 1rem;
  border:1px solid var(--border); border-radius: var(--radius);
  background: var(--surface); color:var(--text);
  box-shadow: var(--shadow-1);
  transition: transform .08s ease, box-shadow .2s ease, border-color .2s ease;
}
#task-list > li > article:hover{
  transform: translateY(-1px); box-shadow: var(--shadow-2); border-color: var(--purple);
}
#task-list h3{ margin:0; font-size:var(--h3); }
#task-list p[itemprop="description"]{ margin:.1rem 0 .4rem; color:var(--text); opacity:.82; }

/* metadata as compact chips with bullets */
#task-list ul[aria-label="Task metadata"]{
  display:flex; flex-wrap:wrap; gap:.45rem .9rem; margin:.1rem 0 .6rem; padding:0; list-style:none;
  color: var(--text); opacity:.8; font-size:.95rem;
}
#task-list ul[aria-label="Task metadata"] li{ position:relative; padding-left:.85rem; }
#task-list ul[aria-label="Task metadata"] li::before{
  content:"•"; position:absolute; left:0; top:.05rem; opacity:.6;
}

/* done state visuals */
#task-list article[data-done="true"]{
  opacity:.85; border-color: var(--periwinkle); position:relative;
}
#task-list article[data-done="true"] h3{ text-decoration: line-through; }
#task-list article[data-done="true"]::after{
  content:"✓"; position:absolute; top:.75rem; right:.75rem; font-weight:900; opacity:.6;
}

/* responsive grid */
@media (min-width:820px){ #task-list{ grid-template-columns:repeat(2,1fr); } }
@media (min-width:1120px){ #task-list{ grid-template-columns:repeat(3,1fr); } }

/* =========================================================
   Dialogs
   ========================================================= */
dialog{
  width:min(560px,96vw);
  border:1px solid var(--border);
  border-radius: var(--radius);
  padding: 1rem;
  background: var(--surface);
  color: var(--text);
  box-shadow: var(--shadow-2);
}
dialog::backdrop{ background: rgba(0,0,0,.5); }
dialog form{ display:grid; gap:.75rem; }
dialog menu{
  display:flex; justify-content:flex-end; gap:.6rem; margin:0; padding:0;
}
#confirm-dialog button.danger{
  border:1px solid var(--purple);
  background: rgba(170,128,236,.16);
  color: var(--text);
}

/* =========================================================
   Toasts
   ========================================================= */
#toast-stack{
  position: fixed; top: 1rem; right: 1rem; display:grid; gap:.5rem;
  z-index: 9999; pointer-events:none;
}
.toast{
  pointer-events:auto; min-width:220px; max-width:360px;
  padding:.6rem .8rem; border-radius:10px;
  border:1px solid var(--border);
  background: var(--surface); color: var(--text);
  box-shadow:0 6px 24px rgba(0,0,0,.3);
  animation: toast-in .18s ease-out;
}
.toast--success{ border-color: var(--periwinkle); }
.toast--error  { border-color: var(--purple); }
.toast--info   { border-color: var(--periwinkle); }
.toast--warn   { border-color: var(--lemon); }
.toast__msg{ margin:0; font-size:.95rem; line-height:1.35; }
.toast__close{
  float:right; margin-left:.6rem; border:0; background:transparent; color:inherit; cursor:pointer;
  font-size:1rem; opacity:.7;
}
.toast__close:hover{ opacity:1; }
@keyframes toast-in{ from{ transform:translateY(-6px); opacity:0; } to{ transform:translateY(0); opacity:1; } }

/* =========================================================
   Drag & drop
   ========================================================= */
#task-list li.dragging { opacity:.6; }
#task-list li.drop-before { border-top:2px dashed var(--periwinkle); }
#task-list li.drop-after  { border-bottom:2px dashed var(--periwinkle); }
.drag-handle{
  cursor:grab; font-weight:700; padding:.2rem .5rem;
  border:1px solid var(--border); border-radius:6px;
  background: var(--surface-2); color: var(--text);
}
.drag-handle:active{ cursor:grabbing; }

/* =========================================================
   Footer
   ========================================================= */
footer{
  border-top:1px solid var(--border);
  color: var(--text); opacity:.8;
  padding-block: 2rem; text-align:center;
}

/* ===========================
   Button system (palette-locked)
   =========================== */
.btn{
  appearance:none; border:none; cursor:pointer;
  padding:.8rem 1.1rem; border-radius:12px;
  font-weight:800; letter-spacing:.2px;
  color: var(--black); background: var(--purple);
  box-shadow: var(--shadow-1);
  transition: transform .06s ease, box-shadow .2s ease;
}
.btn:hover{ transform: translateY(-1px); box-shadow: var(--shadow-2); }
.btn:active{ transform: translateY(0); box-shadow: var(--shadow-1); }
.btn[disabled]{ opacity:.6; cursor:not-allowed; }

/* Pills like the mock */
.btn--buy{
  background: var(--lemon); color: var(--black);
  border:1px solid rgba(0,0,0,.15);
  border-radius: 999px; padding:.7rem 1.2rem;
}
.btn--sell{
  background: var(--purple); color: var(--black);
  border:1px solid rgba(0,0,0,.15);
  border-radius: 999px; padding:.7rem 1.2rem;
}

/* Roles */
.btn--primary{  background: var(--purple);     color: var(--black); }
.btn--accent{   background: var(--periwinkle); color: var(--black); border:1px solid rgba(0,0,0,.12); }
.btn--ghost{    background: var(--white);      color: var(--black); border:1px solid var(--gray); }
.btn--edit{     background: var(--periwinkle); color: var(--black); border:1px solid rgba(0,0,0,.12); }

/* Row helper for filter Apply/Clear */
.btn-row{ display:flex; gap:.6rem; align-items:center; flex-wrap:wrap; }

/* Card action buttons: compact spacing */
[aria-label="Actions"] .btn{
  padding:.5rem .8rem; border-radius:10px;
}

/* Fallback: any plain <button> without .btn stays purple */
button:not(.btn){ background: var(--purple); color: var(--black); }
